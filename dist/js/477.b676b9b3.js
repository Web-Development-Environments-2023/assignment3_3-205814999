(self["webpackChunkassignment_3_3"]=self["webpackChunkassignment_3_3"]||[]).push([[477],{8477:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h1",{staticClass:"title"},[e._v("Search Page")]),r("div",{staticClass:"search-container"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchbody,expression:"searchbody"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:e.searchbody},on:{input:function(t){t.target.composing||(e.searchbody=t.target.value)}}}),r("button",{on:{click:e.search}},[e._v("Search")])]),r("div",{staticClass:"filters"},[r("label",{attrs:{for:"maxResults"}},[e._v("Max Results:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.maxResults,expression:"maxResults"}],attrs:{id:"maxResults"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.maxResults=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"5"}},[e._v("5")]),r("option",{attrs:{value:"10"}},[e._v("10")]),r("option",{attrs:{value:"15"}},[e._v("15")])]),r("label",{attrs:{for:"cuisine"}},[e._v("Cuisine:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.cuisine,expression:"cuisine"}],attrs:{id:"cuisine"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.cuisine=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:""}},[e._v("No Filter")]),e._l(e.cuisineOptions,(function(t){return r("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2),r("label",{attrs:{for:"diet"}},[e._v("Diet:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.diet,expression:"diet"}],attrs:{id:"diet"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.diet=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:""}},[e._v("No Filter")]),e._l(e.dietOptions,(function(t){return r("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2),r("label",{attrs:{for:"intolerance"}},[e._v("Intolerance:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.intolerance,expression:"intolerance"}],attrs:{id:"intolerance"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.intolerance=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:""}},[e._v("No Filter")]),e._l(e.intoleranceOptions,(function(t){return r("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2)]),e.searched&&e.recipes.length>0?r("div",{staticClass:"sorting"},[r("label",{attrs:{for:"sorting"}},[e._v("Sort By:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.sortingOption,expression:"sortingOption"}],attrs:{id:"sorting"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.sortingOption=t.target.multiple?r:r[0]},e.sortRecipes]}},[r("option",{attrs:{value:"popularity"}},[e._v("Popularity")]),r("option",{attrs:{value:"makeTime"}},[e._v("Make Time")])])]):e._e(),e.loading?r("div",{staticClass:"spinner"},[r("i",{staticClass:"fas fa-spinner fa-spin"})]):e._e(),e.recipes.length>0?r("b-row",e._l(e.sortedRecipes,(function(e){return r("b-col",{key:e.id},[r("RecipePreview",{staticClass:"recipePreview",attrs:{recipe:e}})],1)})),1):e.searched&&0===e.recipes.length?r("p",[e._v("No search results found.")]):e.lastSearch?r("p",[e._v("Last search: "+e._s(e.lastSearch))]):e._e()],1)},n=[],i=r(6835),s=r(8534),o=(r(1703),r(6647),r(2707),r(4896));const c={name:"Search",components:{RecipePreview:o.Z},data:function(){return{searchbody:"",maxResults:5,cuisine:"",diet:"",intolerance:"",sortingOption:"popularity",searched:!1,lastSearch:null,cuisineOptions:["African","Asian","American","British","Cajun","Caribbean","Chinese","Eastern European","European","French","German","Greek","Indian","Irish","Italian","Japanese","Jewish","Korean","Latin American","Mediterranean","Mexican","Middle Eastern","Nordic","Southern","Spanish","Thai","Vietnamese"],dietOptions:["Gluten Free","Ketogenic","Vegetarian","Lacto-Vegetarian","Vegan","Pescetarian","Paleo","Primal","Low FODMAP","Whole30"],intoleranceOptions:["Dairy","Egg","Gluten","Grain","Peanut","Seafood","Sesame","Shellfish","Soy","Sulfite","Tree Nut","Wheat"],recipes:[],loading:!1}},created:function(){this.loadLastSearch()},methods:{search:function(){var e=this;return(0,s.Z)((0,i.Z)().mark((function t(){var r;return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.axios.post(e.$root.store.server_domain+"/recipes/search",{search:e.searchbody,limit:e.maxResults,cuisine:e.cuisine,diet:e.diet,intolerance:e.intolerance});case 4:if(r=t.sent,!r||!r.data){t.next=11;break}e.recipes=r.data,e.searched=!0,e.saveLastSearch(),t.next=12;break;case 11:throw new Error("Invalid response from the server");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),console.log(t.t0);case 17:return t.prev=17,e.loading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,14,17,20]])})))()},loadLastSearch:function(){var e=localStorage.getItem("lastSearch");e&&(this.lastSearch=e)},saveLastSearch:function(){this.lastSearch=this.searchbody,localStorage.setItem("lastSearch",this.searchbody)},sortRecipes:function(){"popularity"===this.sortingOption?this.recipes.sort((function(e,t){return t.popularity-e.popularity})):"makeTime"===this.sortingOption&&this.recipes.sort((function(e,t){return e.readyInMinutes-t.readyInMinutes}))}},computed:{sortedRecipes:function(){return this.recipes}}},l=c;var u=r(1001),p=(0,u.Z)(l,a,n,!1,null,"7e2c441d",null);const v=p.exports},4362:(e,t,r)=>{var a=r(1589),n=Math.floor,i=function(e,t){var r=e.length,c=n(r/2);return r<8?s(e,t):o(e,i(a(e,0,c),t),i(a(e,c),t),t)},s=function(e,t){var r,a,n=e.length,i=1;while(i<n){a=i,r=e[i];while(a&&t(e[a-1],r)>0)e[a]=e[--a];a!==i++&&(e[a]=r)}return e},o=function(e,t,r,a){var n=t.length,i=r.length,s=0,o=0;while(s<n||o<i)e[s+o]=s<n&&o<i?a(t[s],r[o])<=0?t[s++]:r[o++]:s<n?t[s++]:r[o++];return e};e.exports=i},5117:(e,t,r)=>{"use strict";var a=r(6330),n=TypeError;e.exports=function(e,t){if(!delete e[t])throw n("Cannot delete property "+a(t)+" of "+a(e))}},8886:(e,t,r)=>{var a=r(8113),n=a.match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},256:(e,t,r)=>{var a=r(8113);e.exports=/MSIE|Trident/.test(a)},8008:(e,t,r)=>{var a=r(8113),n=a.match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},2707:(e,t,r)=>{"use strict";var a=r(2109),n=r(1702),i=r(9662),s=r(7908),o=r(6244),c=r(5117),l=r(1340),u=r(7293),p=r(4362),v=r(9341),d=r(8886),h=r(256),f=r(7392),m=r(8008),g=[],_=n(g.sort),y=n(g.push),x=u((function(){g.sort(void 0)})),S=u((function(){g.sort(null)})),b=v("sort"),w=!u((function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(m)return m<603;var e,t,r,a,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(a=0;a<47;a++)g.push({k:t+a,v:r})}for(g.sort((function(e,t){return t.v-e.v})),a=0;a<g.length;a++)t=g[a].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}})),k=x||!S||!b||!w,C=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:l(t)>l(r)?1:-1}};a({target:"Array",proto:!0,forced:k},{sort:function(e){void 0!==e&&i(e);var t=s(this);if(w)return void 0===e?_(t):_(t,e);var r,a,n=[],l=o(t);for(a=0;a<l;a++)a in t&&y(n,t[a]);p(n,C(e)),r=o(n),a=0;while(a<r)t[a]=n[a++];while(a<l)c(t,a++);return t}})}}]);
//# sourceMappingURL=477.b676b9b3.js.map